services:
  sip_server:
    image: kamailio
    build:
        context: ..
        dockerfile: test/Dockerfile
    container_name: kamailio
    network_mode: host
    volumes:
            - ./kamailio:/etc/kamailio:ro
            - ../sipmediagw.cfg:/etc/sipmediagw.cfg
            - ./kamailio.sqlite:/usr/local/etc/kamailio/kamailio.sqlite
    logging:
      driver: syslog
      options:
        tag: "{{.ImageName}}/{{.Name}}"

  turn_server:
    image: coturn/coturn
    container_name: coturn
    network_mode: host
    logging:
      driver: syslog
      options:
        tag: "{{.ImageName}}/{{.Name}}"
    command:
        - "--log-file=stdout"
        - "--external-ip=192.168.92.1"
        - "--lt-cred-mech"
        - "--user=dmo:1234"
        - "--min-port=40000"
        - "--max-port=49999"

